<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Agnostic secrets management</title>

  <link rel="shortcut icon" type="image/ico" href="/security/assets/favicon.ico">

  <!-- no custom css detected -->

  
  <meta name="description" content="Agnostic secrets management" />
  

  <link rel="stylesheet" href="/security/assets/main.css">
  <link rel="alternate" type="application/rss+xml" title="ThoughtWorks Security Guide" href="/security/feed.xml">
</head>
  <body>
    <header>
  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="/">ThoughtWorks Security Guide</a>
    <div class="collapse navbar-collapse">
      <div class="mr-auto"></div>
      <form class="form-inline mt-2 mt-md-0">
        <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-light my-2 my-sm-0" type="submit">Search</button>
      </form>
    </div>
  </nav>
</header>

    <div class="container-fluid">
      <div class="row">
        <nav class="col-sm-3 col-md-3 d-none d-sm-block bg-light sidebar">
  <ul class="nav nav-pills flex-column">
    <li class="nav-level-0 nav-item">
  <a class="nav-level-0 nav-link " href="/security/">Home</a>
</li>
<li class="nav-level-0 nav-item">
  <a class="nav-level-0 nav-link " href="/security/webappsec/">Web Application Security</a>
</li><li class="nav-level-1 nav-item">
  <a class="nav-level-1 nav-link " href="/security/webappsec/fundamentals/">Fundamentals</a>
</li>
<li class="nav-level-1 nav-item">
  <a class="nav-level-1 nav-link " href="/security/webappsec/checklists/">Checklists</a>
</li>
<li class="nav-level-1 nav-item">
  <a class="nav-level-1 nav-link " href="/security/webappsec/best-practices/">Best Practices</a>
</li>
<li class="nav-level-1 nav-item">
  <a class="nav-level-1 nav-link " href="/security/webappsec/tools/">Tools</a>
</li><li class="nav-level-2 nav-item">
  <a class="nav-level-2 nav-link " href="/security/webappsec/tools/agnostic-tools/">Agnostic</a>
</li><li class="nav-level-3 nav-item">
  <a class="nav-level-3 nav-link " href="/security/webappsec/tools/agnostic-tools/agnostic-dependency-checker.html">Agnostic dependency check</a>
</li>
<li class="nav-level-3 nav-item">
  <a class="nav-level-3 nav-link " href="/security/webappsec/tools/agnostic-tools/agnostic-static-analysis.html">Agnostic static analysis</a>
</li>
<li class="nav-level-3 nav-item">
  <a class="nav-level-3 nav-link " href="/security/webappsec/tools/agnostic-tools/agnostic-dynamic-analysis.html">Agnostic dynamic analysis</a>
</li>
<li class="nav-level-3 nav-item">
  <a class="nav-level-3 nav-link active" href="/security/webappsec/tools/agnostic-tools/agnostic-secrets-management.html">Agnostic secrets management</a>
</li>
<li class="nav-level-2 nav-item">
  <a class="nav-level-2 nav-link " href="/security/webappsec/tools/java-tools/">Java</a>
</li>
<li class="nav-level-2 nav-item">
  <a class="nav-level-2 nav-link " href="/security/webappsec/tools/javascript-tools/">Javascript</a>
</li>
<li class="nav-level-2 nav-item">
  <a class="nav-level-2 nav-link " href="/security/webappsec/tools/python-tools/">Python</a>
</li>
<li class="nav-level-2 nav-item">
  <a class="nav-level-2 nav-link " href="/security/webappsec/tools/ruby-tools/">Ruby</a>
</li>
<li class="nav-level-0 nav-item">
  <a class="nav-level-0 nav-link " href="/security/netsec/">Network Security</a>
</li>
<li class="nav-level-0 nav-item">
  <a class="nav-level-0 nav-link " href="/security/opsec/">Operations Security</a>
</li>
  </ul>
</nav>



        <main role="main" class="col-sm-9 ml-sm-auto col-md-9 pt-3">
          <h1 class="title">Agnostic secrets management</h1>
          <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#environment-variables">Environment variables</a>
<ul>
<li class="toc-entry toc-h2"><a href="#aws-parameter-store">AWS Parameter Store</a></li>
<li class="toc-entry toc-h2"><a href="#gocd">GoCD</a></li>
<li class="toc-entry toc-h2"><a href="#heroku">Heroku</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#encrypted-in-cloud-storage">Encrypted in cloud storage</a>
<ul>
<li class="toc-entry toc-h2"><a href="#cred-stash">cred-stash</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#encrypted-in-source-code">Encrypted in source code</a>
<ul>
<li class="toc-entry toc-h2"><a href="#git-crypt">git-crypt</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#further-reading">Further reading</a></li>
</ul><p>I don’t think you need to be scared into not checking secrets in – you probably already understand that this is bad (<a href="https://github.com/search?utf8=%E2%9C%93&amp;q=add+secret+key&amp;type=Commits">maybe</a>).</p>

<h1 id="environment-variables">
<a id="environment-variables" class="anchor" href="#environment-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Environment variables</h1>

<h2 id="aws-parameter-store">
<a id="aws-parameter-store" class="anchor" href="#aws-parameter-store" aria-hidden="true"><span class="octicon octicon-link"></span></a>AWS Parameter Store</h2>

<p>https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-paramstore.html</p>

<h2 id="gocd">
<a id="gocd" class="anchor" href="#gocd" aria-hidden="true"><span class="octicon octicon-link"></span></a>GoCD</h2>

<p>go-env https://docs.gocd.org/15.3.0/faq/dev_use_current_revision_in_build.html</p>

<h2 id="heroku">
<a id="heroku" class="anchor" href="#heroku" aria-hidden="true"><span class="octicon octicon-link"></span></a>Heroku</h2>

<p>https://devcenter.heroku.com/articles/config-vars</p>

<h1 id="encrypted-in-cloud-storage">
<a id="encrypted-in-cloud-storage" class="anchor" href="#encrypted-in-cloud-storage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Encrypted in cloud storage</h1>

<h2 id="cred-stash">
<a id="cred-stash" class="anchor" href="#cred-stash" aria-hidden="true"><span class="octicon octicon-link"></span></a>cred-stash</h2>

<p>Store secrets in AWS using encrypted S3 buckets</p>

<p>https://github.com/fugue/credstash</p>

<h1 id="encrypted-in-source-code">
<a id="encrypted-in-source-code" class="anchor" href="#encrypted-in-source-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Encrypted in source code</h1>

<h2 id="git-crypt">
<a id="git-crypt" class="anchor" href="#git-crypt" aria-hidden="true"><span class="octicon octicon-link"></span></a>git-crypt</h2>

<p>Install</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ brew install gnupg git-crypt
</code></pre></div></div>

<p>Initialize in your repo</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd my_project
$ git crypt init
</code></pre></div></div>

<p>Specify which files should be encrypted in the <code class="highlighter-rouge">.gitattributes</code> file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*.key filter=git-crypt diff=git-crypt
</code></pre></div></div>

<p>Add public keys that can decrypt the files:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git-crypt add-gpg-user USER_ID
</code></pre></div></div>

<p>After cloning a repository with encrypted files, unlock with:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git-crypt unlock
</code></pre></div></div>

<p>Check which files are encrypted:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git crypt status
</code></pre></div></div>

<h1 id="further-reading">
<a id="further-reading" class="anchor" href="#further-reading" aria-hidden="true"><span class="octicon octicon-link"></span></a>Further reading</h1>

<p>https://12factor.net/config</p>

        </main>
      </div>
    </div>
  </body>
</html>